@(user: Option[User])
@wrapper(user) {
  <div id="screen" class="screen"></div>
  <input type="text" id="text">
  <input type="button" id="sendButton">
  @*<script>
  var game = new Phaser.Game(800, 600, Phaser.CANVAS, '');
  game.state.add('Load', GameStates.Load);
  game.state.add('MainMenu', GameStates.MainMenu);
  game.state.add('MainGame', GameStates.MainGame);
  game.state.start('Load');

  connect('socket', function(message) {console.log(JSON.parse(message.data))});
  </script>*@
  <script>
    var send = function() {
      var message = {};
      var text = document.getElementById('text').value;
      if (text.charAt(0) == '!')
        message.newLocation = text.substring(1);
      else
        message.text = text;
      sendMessage(message);
    };
    document.getElementById("sendButton" ).onclick = send;
    var receive = function(message) {
	    var msg = JSON.parse(message.data);
	    if (msg.newLocation) {
		    document.title = msg.newLocation;
		    return;
	    }
	    var entry = msg.isOwner ? "<b>" + msg.user + "</b>" : msg.user;
	    entry += ": " + msg.text + "<br>";
      document.getElementById("screen").innerHTML += entry;
    };
    connect('socket', receive);
  </script>
}