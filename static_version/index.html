<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="assets/javascripts/phaser.js"></script>
    <link rel="stylesheet" media="screen" href="assets/stylesheets/main.css">
</head>
<body>
<div id="screen"></div>
<script>
    var game = new Phaser.Game(800, 600, Phaser.CANVAS, '', { preload: preload, create: create, update: update });

    function preload() {
        game.load.tilemap('map', 'assets/data/collision_test.json', null, Phaser.Tilemap.TILED_JSON);
        game.load.image('ground_1x1', 'assets/images/map/ground_1x1.png');
        game.load.image('walls_1x2', 'assets/images/map/walls_1x2.png');
        game.load.image('tiles2', 'assets/images/map/tiles2.png');
        game.load.image('ship', 'assets/images/sprites/thrust_ship2.png');
    }

    var player;
    var stars;
    var score = 0;
    var scoreText;

    var ship;
    var map;
    var layer;
    var cursors;

    function create() {
        game.stage.backgroundColor = '#000';
        game.physics.startSystem(Phaser.Physics.P2JS);

        map = game.add.tilemap('map');

        map.addTilesetImage('ground_1x1');
        map.addTilesetImage('walls_1x2');
        map.addTilesetImage('tiles2');

        layer = map.createLayer('Tile Layer 1');

        layer.resizeWorld();

        map.setCollisionBetween(1, 12);
        game.physics.p2.convertTilemap(map, layer);

        ship = game.add.sprite(200, 200, 'ship');
        game.physics.p2.enable(ship);

        game.camera.follow(ship);

        game.physics.p2.setBoundsToWorld(true, true, true, true, false);

        cursors = game.input.keyboard.createCursorKeys();
    }

    function update() {
        if (cursors.left.isDown)
            ship.body.rotateLeft(100);
        else if (cursors.right.isDown)
            ship.body.rotateRight(100);
        else
            ship.body.setZeroRotation();

        if (cursors.up.isDown)
            ship.body.thrust(400);
        else if (cursors.down.isDown)
            ship.body.reverse(400);

    }
</script>
</body>
</html>
